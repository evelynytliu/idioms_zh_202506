<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>成語實力挑戰賽（全拖拉互動版）</title>
  <style>
    body { font-family:"Noto Sans TC",sans-serif; margin:2rem; max-width:900px; background:#f8f9fa; }
    h1,h2 { color:#2c3e50; }
    p, li { line-height:1.6; }
    .draggable { padding:6px 12px; background:#ecf0f1; border-radius:4px; margin:4px; display:inline-block; cursor:grab; }
    .drop-slot { display:inline-block; min-width:140px; min-height:24px; margin:4px; padding:4px; border:2px dashed #bbb; border-radius:4px; vertical-align:middle; }
    .drop-slot.filled { background:#dff0d8; border-color:#3c763d; }
    .correct { border-color:#3c763d!important; background:#dff0d8!important; }
    .wrong { background:#f8d7da!important; border-color:#a94442!important; }
    button { margin-top:1rem; padding:8px 16px; font-size:1rem; }
    section { margin-top:2rem; background:#fff; padding:1rem; border-radius:5px; border:1px solid #ddd; }
  </style>
</head>
<body>
  <h1>翰林國小 高年級 成語實力挑戰賽<br><small>（全拖拉互動版）</small></h1>
  <p>班級：_____　姓名：_____　座號：_____</p>

  <!-- 題庫一次準備 -->
  <div id="drags" style="display:none;">
    渾渾噩噩,罪魁禍首,任勞任怨,無可奈何,出爾反爾,姍姍來遲,對症下藥,大惑不解,搜索枯腸,滔滔不絕,大庭廣眾,狼狽不堪,心如刀割,居心叵測,裹足不前,念飴弄孫,磨杵成針,博古通今,冠冕堂皇,神來之筆,梁上君子,臨渴掘井,一決雌雄,別出心裁,單刀直入,生不逢辰,白雲蒼狗,甘拜下風,大庭廣眾
  </div>

  <section>
    <h2>第一大題：情境選擇（拖拉填空、共10題）</h2>
    <p>將成語拖到句中空格，完成後點「檢查」。</p>
    <ol>
      <li>媽媽每天幫忙家務，真是<div class="drop-slot" data-answer="任勞任怨"></div>。</li>
      <li>這場火災的<div class="drop-slot" data-answer="罪魁禍首"></div>是菸蒂。</li>
      <li>小明總是<div class="drop-slot" data-answer="姍姍來遲"></div>。</li>
      <li>沒帶傘被淋得<div class="drop-slot" data-answer="狼狽不堪"></div>。</li>
      <li>醫生立即<div class="drop-slot" data-answer="對症下藥"></div>後，我康復了。</li>
      <li>看到寵物痛苦，我心像刀割—<div class="drop-slot" data-answer="心如刀割"></div>。</li>
      <li>他說完就不做，真是<div class="drop-slot" data-answer="出爾反爾"></div>。</li>
      <li>一提話題他就<div class="drop-slot" data-answer="滔滔不絕"></div>。</li>
      <li>寫作困難，我在思考<div class="drop-slot" data-answer="搜索枯腸"></div>。</li>
      <li>他沉迷遊戲生活變得<div class="drop-slot" data-answer="渾渾噩噩"></div>。</li>
    </ol>
    <button onclick="checkSection('sec1')">檢查第一題</button>
    <div class="feedback" id="sec1"></div>
  </section>

  <section>
    <h2>第二大題：成語配對（拖拉配對、共10題）</h2>
    <p>將成語拖至對應空格，完成後點「檢查第二題」。</p>
    <ol>
      <li>爺爺退休後陪孫子玩，是<div class="drop-slot" data-answer="念飴弄孫"></div>。</li>
      <li>多年苦練，他以磨杵成針般毅力成大師：<div class="drop-slot" data-answer="磨杵成針"></div></li>
      <li>老師知識豐富，是<div class="drop-slot" data-answer="博古通今"></div>。</li>
      <li>檢察官說一番話冠冕堂皇卻不實：<div class="drop-slot" data-answer="冠冕堂皇"></div></li>
      <li>畫家題字後加一句<span>神來之筆</span>：<div class="drop-slot" data-answer="神來之筆"></div></li>
      <li>「小偷」的雅稱是<div class="drop-slot" data-answer="梁上君子"></div>。</li>
      <li>考前一天才準備是<div class="drop-slot" data-answer="臨渴掘井"></div>。</li>
      <li>兩隊將展開<div class="drop-slot" data-answer="一決雌雄"></div>。</li>
      <li>這作品設計非常創新—<div class="drop-slot" data-answer="別出心裁"></div></li>
      <li>他一開口就<div class="drop-slot" data-answer="單刀直入"></div>問題核心。</li>
    </ol>
    <button onclick="checkSection('sec2')">檢查第二題</button>
    <div class="feedback" id="sec2"></div>
  </section>

  <section>
    <h2>第三大題：讀短文填空（拖拉填入、共5題）</h2>
    <p>短文中拖入合適成語後點「檢查」。</p>
    <p>小華是一位才華洋溢的作家，他文章總是<div class="drop-slot" data-answer="引經據典"></div>。可惜當時風格不被看好，他常感嘆自己<div class="drop-slot" data-answer="生不逢辰"></div>。幾十年後，世事如<div class="drop-slot" data-answer="白雲蒼狗"></div>，他作品被重新發掘，連當紅作家都公開表示在他面前自己<div class="drop-slot" data-answer="甘拜下風"></div>。如今，他⋯只能<div class="drop-slot" data-answer="無可奈何"></div>地感嘆命運。</p>
    <button onclick="checkSection('sec3')">檢查第三題</button>
    <div class="feedback" id="sec3"></div>
  </section>

  <section>
    <h2>第四大題：我是造句小高手（拖拉填句、共4題）</h2>
    <p>完成以下造句後點「檢查第四題」。</p>
    <ol>
      <li>王叔叔今天突然生氣，我真是<div class="drop-slot" data-answer="大惑不解"></div>。</li>
      <li>陌生人盯著我們看，很明顯是<div class="drop-slot" data-answer="居心叵測"></div>。</li>
      <li>學習困難時，我們不應該<div class="drop-slot" data-answer="裹足不前"></div>。</li>
      <li>在<div class="drop-slot" data-answer="大庭廣眾"></div>下隨地吐痰，太沒公德了。</li>
    </ol>
    <button onclick="checkSection('sec4')">檢查第四題</button>
    <div class="feedback" id="sec4"></div>
  </section>

  <h2>📋 可拖曳成語列表</h2>
  <div id="dragPool"></div>

  <script>
    // 生成拖拉選項
    const poolEl = document.getElementById('dragPool');
    document.getElementById('drags').textContent.split(',').forEach(text => {
      const d = document.createElement('div');
      d.className = 'draggable';
      d.draggable = true;
      d.textContent = text;
      poolEl.appendChild(d);
    });

    let dragged = null;
    document.addEventListener('dragstart', e => {
      if(e.target.classList.contains('draggable')){
        dragged = e.target; e.target.style.opacity='0.5';
      }
    });
    document.addEventListener('dragend', e => {
      if(e.target.classList.contains('draggable')){
        e.target.style.opacity='1';
      }
    });
    document.querySelectorAll('.drop-slot').forEach(slot => {
      slot.addEventListener('dragover', e => e.preventDefault());
      slot.addEventListener('drop', e => {
        if(dragged && !slot.classList.contains('filled')){
          slot.textContent = dragged.textContent;
          slot.classList.add('filled');
          dragged.remove();
        }
      });
    });

    function checkSection(secId){
      const slots = document.querySelectorAll(`#${secId.replace('sec','')} .drop-slot`);
      let correct=0;
      slots.forEach(s=>{
        if(s.textContent === s.getAttribute('data-answer')){
          s.classList.add('correct');
          s.classList.remove('wrong');
          correct++;
        } else {
          s.classList.add('wrong');
          s.classList.remove('correct');
        }
      });
      document.getElementById(secId).textContent = `答對 ${correct} / ${slots.length} 題！`;
    }
  </script>
</body>
</html>
